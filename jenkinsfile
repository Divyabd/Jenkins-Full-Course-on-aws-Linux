pipeline{
    agent any

// environment{
//     PATH="/opt/maven/apache-maven-3.8.6/bin:$PATH"
// }
tools{
'maven' 'maven3'
'hudson.plugins.sonar.MsBuildSQRunnerInstallation' 'sonarQube'
}


    stages{

//   GIT checkout stage 
        stage('GIT CHECKOUT'){
            steps{
                git 'https://github.com/Divyabd/Jenkins-Full-Course-on-aws-Linux.git'
            }
        }


//  Maven build stage 
        stage('Maven clean'){
            steps{
                sh 'mvn -f Maven/pom.xml clean install'
                sh 'mvn -f Maven/pom.xml install package'
            }
        }

// Sonarqube intregration stage 
        stage("SonarQube intergration"){
            steps{
                withCredentials([string(credentialsId: 'jenkins-sonarqube', variable: '')]) {
                sh 'mvn -f Maven/pom.xml clean install sonar:sonar'
}

            }
         
        }
    }
}